{"version":3,"sources":["test.js"],"names":[],"mappings":";;AAAA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,MAAM,QAAQ,SAAR,CAAV;;AAEA,IAAI,WAAW,CAAf;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,MAAM,QAAQ,KAAR,CAAV;;AAEA,IAAI,KAAK,GAAG,iBAAH,CAAqB,WAArB,CAAT;AACA,IAAI,EAAJ,EAAQ,UAAS,GAAT,EAAc;AACrB;AACA,QAAO,CAAC,CAAC,GAAT;AACA,KAAI,CAAC,QAAL,EAAe,QAAQ,IAAR,CAAa,CAAb;AACf,CAJD;AAKA,GAAG,KAAH;;AAEA,IAAI,KAAK,GAAG,gBAAH,CAAoB,aAApB,CAAT;AACA,IAAI,EAAJ,EAAQ,UAAS,GAAT,EAAc;AACrB;AACA,QAAO,CAAC,CAAC,GAAT;AACA,KAAI,CAAC,QAAL,EAAe,QAAQ,IAAR,CAAa,CAAb;AACf,CAJD;AAKA,GAAG,KAAH;;AAEA,IAAI,KAAK,GAAG,gBAAH,CAAoB,UAApB,CAAT;AACA,IAAI,EAAJ,EAAQ,UAAS,GAAT,EAAc;AACrB;AACA,QAAO,CAAC,GAAR;AACA,KAAI,CAAC,QAAL,EAAe,QAAQ,IAAR,CAAa,CAAb;AACf,CAJD;AAKA,GAAG,IAAH,CAAQ,GAAG,iBAAH,CAAqB,WAArB,CAAR;;AAEA,IAAI,KAAK,GAAG,gBAAH,CAAoB,UAApB,CAAT;AACA,IAAI,EAAJ,EAAQ,UAAS,GAAT,EAAc;AACrB,OAAM,IAAI,KAAJ,CAAU,OAAV,CAAN;AACA,CAFD;AAGA,GAAG,IAAH,CAAQ,GAAG,iBAAH,CAAqB,WAArB,CAAR;;AAEA,IAAI,SAAS,IAAI,OAAJ,CAAY,KAAZ,CAAb;AACA,IAAI,MAAJ,EAAY,UAAS,GAAT,EAAc;AACzB;AACA,QAAO,CAAC,CAAC,GAAT;AACA,KAAI,CAAC,QAAL,EAAe,QAAQ,IAAR,CAAa,CAAb;AACf,CAJD;;AAMA,IAAI,SAAS,IAAI,YAAJ,CAAiB,UAAS,MAAT,EAAiB;AAC9C,KAAI,MAAJ,EAAY,YAAW;AACtB;AACA,MAAI,CAAC,QAAL,EAAe,QAAQ,IAAR,CAAa,CAAb;AACf,EAHD;AAIA,QAAO,OAAP;AACA,CANY,EAMV,MANU,CAMH,KANG,EAMI,YAAW;AAC3B,KAAI,SAAS,IAAI,OAAJ,CAAY,KAAZ,CAAb;AACA,KAAI,MAAJ,EAAY,YAAW;AACtB;AACA,MAAI,CAAC,QAAL,EAAe,QAAQ,IAAR,CAAa,CAAb;AACf,EAHD;AAIA,CAZY,CAAb;;AAcA,WAAW,YAAW;AACrB,QAAO,aAAa,CAApB;AACA,SAAQ,IAAR,CAAa,CAAb;AACA,CAHD,EAGG,IAHH","file":"test-compiled.js","sourcesContent":["var assert = require('assert');\nvar eos = require('./index');\n\nvar expected = 6;\nvar fs = require('fs');\nvar net = require('net');\n\nvar ws = fs.createWriteStream('/dev/null');\neos(ws, function(err) {\n\texpected--;\n\tassert(!!err);\n\tif (!expected) process.exit(0);\n});\nws.close();\n\nvar rs = fs.createReadStream('/dev/random');\neos(rs, function(err) {\n\texpected--;\n\tassert(!!err);\n\tif (!expected) process.exit(0);\n});\nrs.close();\n\nvar rs = fs.createReadStream(__filename);\neos(rs, function(err) {\n\texpected--;\n\tassert(!err);\n\tif (!expected) process.exit(0);\n});\nrs.pipe(fs.createWriteStream('/dev/null'));\n\nvar rs = fs.createReadStream(__filename);\neos(rs, function(err) {\n\tthrow new Error('no go')\n})();\nrs.pipe(fs.createWriteStream('/dev/null'));\n\nvar socket = net.connect(50000);\neos(socket, function(err) {\n\texpected--;\n\tassert(!!err);\n\tif (!expected) process.exit(0);\n});\n\nvar server = net.createServer(function(socket) {\n\teos(socket, function() {\n\t\texpected--;\n\t\tif (!expected) process.exit(0);\n\t});\n\tsocket.destroy();\n}).listen(30000, function() {\n\tvar socket = net.connect(30000);\n\teos(socket, function() {\n\t\texpected--;\n\t\tif (!expected) process.exit(0);\n\t});\n});\n\nsetTimeout(function() {\n\tassert(expected === 0);\n\tprocess.exit(0);\n}, 1000);\n"]}