{"version":3,"sources":["_task.js"],"names":[],"mappings":";;AAAA,IAAI,MAAqB,QAAQ,QAAR,CAAzB;IACI,SAAqB,QAAQ,WAAR,CADzB;IAEI,OAAqB,QAAQ,SAAR,CAFzB;IAGI,MAAqB,QAAQ,eAAR,CAHzB;IAII,SAAqB,QAAQ,WAAR,CAJzB;IAKI,UAAqB,OAAO,OALhC;IAMI,UAAqB,OAAO,YANhC;IAOI,YAAqB,OAAO,cAPhC;IAQI,iBAAqB,OAAO,cARhC;IASI,UAAqB,CATzB;IAUI,QAAqB,EAVzB;IAWI,qBAAqB,oBAXzB;IAYI,KAZJ;IAYW,OAZX;IAYoB,IAZpB;AAaA,IAAI,MAAM,SAAN,GAAM,GAAU;AAClB,MAAI,KAAK,CAAC,IAAV;AACA,MAAG,MAAM,cAAN,CAAqB,EAArB,CAAH,EAA4B;AAC1B,QAAI,KAAK,MAAM,EAAN,CAAT;AACA,WAAO,MAAM,EAAN,CAAP;AACA;AACD;AACF,CAPD;AAQA,IAAI,WAAW,SAAX,QAAW,CAAS,KAAT,EAAe;AAC5B,MAAI,IAAJ,CAAS,MAAM,IAAf;AACD,CAFD;;AAIA,IAAG,CAAC,OAAD,IAAY,CAAC,SAAhB,EAA0B;AACxB,YAAU,SAAS,YAAT,CAAsB,EAAtB,EAAyB;AACjC,QAAI,OAAO,EAAX;QAAe,IAAI,CAAnB;AACA,WAAM,UAAU,MAAV,GAAmB,CAAzB;AAA2B,WAAK,IAAL,CAAU,UAAU,GAAV,CAAV;AAA3B,KACA,MAAM,EAAE,OAAR,IAAmB,YAAU;AAC3B,aAAO,OAAO,EAAP,IAAa,UAAb,GAA0B,EAA1B,GAA+B,SAAS,EAAT,CAAtC,EAAoD,IAApD;AACD,KAFD;AAGA,UAAM,OAAN;AACA,WAAO,OAAP;AACD,GARD;AASA,cAAY,SAAS,cAAT,CAAwB,EAAxB,EAA2B;AACrC,WAAO,MAAM,EAAN,CAAP;AACD,GAFD;;AAIA,MAAG,QAAQ,QAAR,EAAkB,OAAlB,KAA8B,SAAjC,EAA2C;AACzC,YAAQ,eAAS,EAAT,EAAY;AAClB,cAAQ,QAAR,CAAiB,IAAI,GAAJ,EAAS,EAAT,EAAa,CAAb,CAAjB;AACD,KAFD;;AAID,GALD,MAKO,IAAG,cAAH,EAAkB;AACvB,gBAAU,IAAI,cAAJ,EAAV;AACA,aAAU,QAAQ,KAAlB;AACA,cAAQ,KAAR,CAAc,SAAd,GAA0B,QAA1B;AACA,cAAQ,IAAI,KAAK,WAAT,EAAsB,IAAtB,EAA4B,CAA5B,CAAR;;;AAGD,KAPM,MAOA,IAAG,OAAO,gBAAP,IAA2B,OAAO,WAAP,IAAsB,UAAjD,IAA+D,CAAC,OAAO,aAA1E,EAAwF;AAC7F,gBAAQ,eAAS,EAAT,EAAY;AAClB,iBAAO,WAAP,CAAmB,KAAK,EAAxB,EAA4B,GAA5B;AACD,SAFD;AAGA,eAAO,gBAAP,CAAwB,SAAxB,EAAmC,QAAnC,EAA6C,KAA7C;;AAED,OANM,MAMA,IAAG,sBAAsB,IAAI,QAAJ,CAAzB,EAAuC;AAC5C,kBAAQ,eAAS,EAAT,EAAY;AAClB,iBAAK,WAAL,CAAiB,IAAI,QAAJ,CAAjB,EAAgC,kBAAhC,IAAsD,YAAU;AAC9D,mBAAK,WAAL,CAAiB,IAAjB;AACA,kBAAI,IAAJ,CAAS,EAAT;AACD,aAHD;AAID,WALD;;AAOD,SARM,MAQA;AACL,oBAAQ,eAAS,EAAT,EAAY;AAClB,yBAAW,IAAI,GAAJ,EAAS,EAAT,EAAa,CAAb,CAAX,EAA4B,CAA5B;AACD,aAFD;AAGD;AACF;AACD,OAAO,OAAP,GAAiB;AACf,OAAO,OADQ;AAEf,SAAO;AAFQ,CAAjB","file":"_task-compiled.js","sourcesContent":["var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};"]}