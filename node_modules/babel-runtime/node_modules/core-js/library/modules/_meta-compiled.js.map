{"version":3,"sources":["_meta.js"],"names":[],"mappings":";;;;AAAA,IAAI,OAAW,QAAQ,QAAR,EAAkB,MAAlB,CAAf;IACI,WAAW,QAAQ,cAAR,CADf;IAEI,MAAW,QAAQ,QAAR,CAFf;IAGI,UAAW,QAAQ,cAAR,EAAwB,CAHvC;IAII,KAAW,CAJf;AAKA,IAAI,eAAe,OAAO,YAAP,IAAuB,YAAU;AAClD,SAAO,IAAP;AACD,CAFD;AAGA,IAAI,SAAS,CAAC,QAAQ,UAAR,EAAoB,YAAU;AAC1C,SAAO,aAAa,OAAO,iBAAP,CAAyB,EAAzB,CAAb,CAAP;AACD,CAFa,CAAd;AAGA,IAAI,UAAU,SAAV,OAAU,CAAS,EAAT,EAAY;AACxB,UAAQ,EAAR,EAAY,IAAZ,EAAkB,EAAC,OAAO;AACxB,SAAG,MAAM,EAAE,EADa,E;AAExB,SAAG,E;AAFqB,KAAR,EAAlB;AAID,CALD;AAMA,IAAI,UAAU,SAAV,OAAU,CAAS,EAAT,EAAa,MAAb,EAAoB;;AAEhC,MAAG,CAAC,SAAS,EAAT,CAAJ,EAAiB,OAAO,QAAO,EAAP,yCAAO,EAAP,MAAa,QAAb,GAAwB,EAAxB,GAA6B,CAAC,OAAO,EAAP,IAAa,QAAb,GAAwB,GAAxB,GAA8B,GAA/B,IAAsC,EAA1E;AACjB,MAAG,CAAC,IAAI,EAAJ,EAAQ,IAAR,CAAJ,EAAkB;;AAEhB,QAAG,CAAC,aAAa,EAAb,CAAJ,EAAqB,OAAO,GAAP;;AAErB,QAAG,CAAC,MAAJ,EAAW,OAAO,GAAP;;AAEX,YAAQ,EAAR;;AAED,GAAC,OAAO,GAAG,IAAH,EAAS,CAAhB;AACH,CAZD;AAaA,IAAI,UAAU,SAAV,OAAU,CAAS,EAAT,EAAa,MAAb,EAAoB;AAChC,MAAG,CAAC,IAAI,EAAJ,EAAQ,IAAR,CAAJ,EAAkB;;AAEhB,QAAG,CAAC,aAAa,EAAb,CAAJ,EAAqB,OAAO,IAAP;;AAErB,QAAG,CAAC,MAAJ,EAAW,OAAO,KAAP;;AAEX,YAAQ,EAAR;;AAED,GAAC,OAAO,GAAG,IAAH,EAAS,CAAhB;AACH,CAVD;;AAYA,IAAI,WAAW,SAAX,QAAW,CAAS,EAAT,EAAY;AACzB,MAAG,UAAU,KAAK,IAAf,IAAuB,aAAa,EAAb,CAAvB,IAA2C,CAAC,IAAI,EAAJ,EAAQ,IAAR,CAA/C,EAA6D,QAAQ,EAAR;AAC7D,SAAO,EAAP;AACD,CAHD;AAIA,IAAI,OAAO,OAAO,OAAP,GAAiB;AAC1B,OAAU,IADgB;AAE1B,QAAU,KAFgB;AAG1B,WAAU,OAHgB;AAI1B,WAAU,OAJgB;AAK1B,YAAU;AALgB,CAA5B","file":"_meta-compiled.js","sourcesContent":["var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};"]}