{"version":3,"sources":["lazystream.js"],"names":[],"mappings":";;AAAA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,cAAc,QAAQ,6BAAR,CAAlB;;AAEA,OAAO,OAAP,GAAiB;AACf,YAAU,QADK;AAEf,YAAU;AAFK,CAAjB;;AAKA,KAAK,QAAL,CAAc,QAAd,EAAwB,WAAxB;AACA,KAAK,QAAL,CAAc,QAAd,EAAwB,WAAxB;;;;;AAKA,SAAS,eAAT,CAAyB,QAAzB,EAAmC,MAAnC,EAA2C,QAA3C,EAAqD;AACnD,WAAS,MAAT,IAAmB,YAAW;AAC5B,WAAO,SAAS,MAAT,CAAP;AACA,aAAS,KAAT,CAAe,IAAf,EAAqB,SAArB;AACA,WAAO,KAAK,MAAL,EAAa,KAAb,CAAmB,IAAnB,EAAyB,SAAzB,CAAP;AACD,GAJD;AAKD;;AAED,SAAS,QAAT,CAAkB,EAAlB,EAAsB,OAAtB,EAA+B;AAC7B,MAAI,EAAE,gBAAgB,QAAlB,CAAJ,EACE,OAAO,IAAI,QAAJ,CAAa,EAAb,EAAiB,OAAjB,CAAP;;AAEF,cAAY,IAAZ,CAAiB,IAAjB,EAAuB,OAAvB;;AAEA,kBAAgB,IAAhB,EAAsB,OAAtB,EAA+B,YAAW;AACxC,QAAI,SAAS,GAAG,IAAH,CAAQ,IAAR,EAAc,OAAd,CAAb;AACA,QAAI,OAAO,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAAqB,OAArB,CAAX;AACA,WAAO,EAAP,CAAU,OAAV,EAAmB,IAAnB;AACA,WAAO,IAAP,CAAY,IAAZ;AACD,GALD;;AAOA,OAAK,IAAL,CAAU,UAAV;AACD;;AAED,SAAS,QAAT,CAAkB,EAAlB,EAAsB,OAAtB,EAA+B;AAC7B,MAAI,EAAE,gBAAgB,QAAlB,CAAJ,EACE,OAAO,IAAI,QAAJ,CAAa,EAAb,EAAiB,OAAjB,CAAP;;AAEF,cAAY,IAAZ,CAAiB,IAAjB,EAAuB,OAAvB;;AAEA,kBAAgB,IAAhB,EAAsB,QAAtB,EAAgC,YAAW;AACzC,QAAI,cAAc,GAAG,IAAH,CAAQ,IAAR,EAAc,OAAd,CAAlB;AACA,QAAI,OAAO,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAAqB,OAArB,CAAX;AACA,gBAAY,EAAZ,CAAe,OAAf,EAAwB,IAAxB;AACA,SAAK,IAAL,CAAU,WAAV;AACD,GALD;;AAOA,OAAK,IAAL,CAAU,UAAV;AACD","file":"lazystream-compiled.js","sourcesContent":["var util = require('util');\nvar PassThrough = require('readable-stream/passthrough');\n\nmodule.exports = {\n  Readable: Readable,\n  Writable: Writable\n};\n\nutil.inherits(Readable, PassThrough);\nutil.inherits(Writable, PassThrough);\n\n// Patch the given method of instance so that the callback\n// is executed once, before the actual method is called the\n// first time.\nfunction beforeFirstCall(instance, method, callback) {\n  instance[method] = function() {\n    delete instance[method];\n    callback.apply(this, arguments);\n    return this[method].apply(this, arguments);\n  };\n}\n\nfunction Readable(fn, options) {\n  if (!(this instanceof Readable))\n    return new Readable(fn, options);\n\n  PassThrough.call(this, options);\n\n  beforeFirstCall(this, '_read', function() {\n    var source = fn.call(this, options);\n    var emit = this.emit.bind(this, 'error');\n    source.on('error', emit);\n    source.pipe(this);\n  });\n\n  this.emit('readable');\n}\n\nfunction Writable(fn, options) {\n  if (!(this instanceof Writable))\n    return new Writable(fn, options);\n\n  PassThrough.call(this, options);\n\n  beforeFirstCall(this, '_write', function() {\n    var destination = fn.call(this, options);\n    var emit = this.emit.bind(this, 'error');\n    destination.on('error', emit);\n    this.pipe(destination);\n  });\n\n  this.emit('writable');\n}\n\n"]}