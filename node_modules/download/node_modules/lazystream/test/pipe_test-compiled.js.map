{"version":3,"sources":["pipe_test.js"],"names":[],"mappings":";;AACA,IAAI,SAAS,QAAQ,mBAAR,CAAb;AACA,IAAI,SAAS,QAAQ,UAAR,CAAb;;AAEA,QAAQ,IAAR,GAAe;AACb,aAAW,mBAAS,IAAT,EAAe;AACxB,QAAI,WAAW,CAAE,SAAF,EAAa,SAAb,CAAf;AACA,QAAI,SAAS,EAAb;AACA,QAAI,uBAAuB,KAA3B;AACA,QAAI,uBAAuB,KAA3B;;AAEA,SAAK,MAAL,CAAY,CAAZ;;AAEA,QAAI,WAAW,IAAI,OAAO,QAAX,CAAoB,YAAW;AAC5C,6BAAuB,IAAvB;AACA,aAAO,IAAI,OAAO,aAAX,CAAyB,GAAG,MAAH,CAAU,QAAV,CAAzB,CAAP;AACD,KAHc,CAAf;;AAKA,QAAI,WAAW,IAAI,OAAO,QAAX,CAAoB,YAAW;AAC5C,6BAAuB,IAAvB;AACA,aAAO,IAAI,OAAO,aAAX,CAAyB,MAAzB,CAAP;AACD,KAHc,CAAf;;AAKA,SAAK,KAAL,CAAW,oBAAX,EAAiC,KAAjC,EAAwC,6DAAxC;AACA,SAAK,KAAL,CAAW,oBAAX,EAAiC,KAAjC,EAAwC,6DAAxC;;AAEA,aAAS,EAAT,CAAY,KAAZ,EAAmB,YAAW;AAC5B,WAAK,KAAL,CAAW,OAAO,IAAP,CAAY,EAAZ,CAAX,EAA4B,SAAS,IAAT,CAAc,EAAd,CAA5B,EAA+C,kDAA/C;AACA,WAAK,IAAL;AACD,KAHD;;AAKA,aAAS,IAAT,CAAc,QAAd;AACD;AA5BY,CAAf","file":"pipe_test-compiled.js","sourcesContent":["\nvar stream = require('../lib/lazystream');\nvar helper = require('./helper');\n\nexports.pipe = {\n  readwrite: function(test) {\n    var expected = [ 'line1\\n', 'line2\\n' ];\n    var actual = [];\n    var readableInstantiated = false;\n    var writableInstantiated = false;\n\n    test.expect(3);\n\n    var readable = new stream.Readable(function() {\n      readableInstantiated = true;\n      return new helper.DummyReadable([].concat(expected));\n    });\n\n    var writable = new stream.Writable(function() {\n      writableInstantiated = true;\n      return new helper.DummyWritable(actual);\n    });\n\n    test.equal(readableInstantiated, false, 'DummyReadable should only be instantiated when it is needed');\n    test.equal(writableInstantiated, false, 'DummyWritable should only be instantiated when it is needed');\n\n    writable.on('end', function() {\n      test.equal(actual.join(''), expected.join(''), 'Piping on demand streams should keep data intact');\n      test.done();\n    });\n    \n    readable.pipe(writable);\n  }\n};\n\n\n"]}