{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var path = require('path');\nvar clone = require('clone');\nvar cloneStats = require('clone-stats');\nvar cloneBuffer = require('./lib/cloneBuffer');\nvar isBuffer = require('./lib/isBuffer');\nvar isStream = require('./lib/isStream');\nvar isNull = require('./lib/isNull');\nvar inspectStream = require('./lib/inspectStream');\nvar Stream = require('stream');\nvar replaceExt = require('replace-ext');\n\nfunction File(file) {\n  if (!file) {\n    file = {};\n  }\n\n  // Record path change\n  var history = file.path ? [file.path] : file.history;\n  this.history = history || [];\n\n  this.cwd = file.cwd || process.cwd();\n  this.base = file.base || this.cwd;\n\n  // Stat = files stats object\n  this.stat = file.stat || null;\n\n  // Contents = stream, buffer, or null if not read\n  this.contents = file.contents || null;\n\n  this._isVinyl = true;\n}\n\nFile.prototype.isBuffer = function() {\n  return isBuffer(this.contents);\n};\n\nFile.prototype.isStream = function() {\n  return isStream(this.contents);\n};\n\nFile.prototype.isNull = function() {\n  return isNull(this.contents);\n};\n\n// TODO: Should this be moved to vinyl-fs?\nFile.prototype.isDirectory = function() {\n  return this.isNull() && this.stat && this.stat.isDirectory();\n};\n\nFile.prototype.clone = function(opt) {\n  if (typeof opt === 'boolean') {\n    opt = {\n      deep: opt,\n      contents: true,\n    };\n  } else if (!opt) {\n    opt = {\n      deep: true,\n      contents: true,\n    };\n  } else {\n    opt.deep = opt.deep === true;\n    opt.contents = opt.contents !== false;\n  }\n\n  // Clone our file contents\n  var contents;\n  if (this.isStream()) {\n    contents = this.contents.pipe(new Stream.PassThrough());\n    this.contents = this.contents.pipe(new Stream.PassThrough());\n  } else if (this.isBuffer()) {\n    contents = opt.contents ? cloneBuffer(this.contents) : this.contents;\n  }\n\n  var file = new File({\n    cwd: this.cwd,\n    base: this.base,\n    stat: (this.stat ? cloneStats(this.stat) : null),\n    history: this.history.slice(),\n    contents: contents,\n  });\n\n  // Clone our custom properties\n  Object.keys(this).forEach(function(key) {\n    // Ignore built-in fields\n    if (key === '_contents' || key === 'stat' ||\n      key === 'history' || key === 'path' ||\n      key === 'base' || key === 'cwd') {\n      return;\n    }\n    file[key] = opt.deep ? clone(this[key], true) : this[key];\n  }, this);\n  return file;\n};\n\nFile.prototype.pipe = function(stream, opt) {\n  if (!opt) {\n    opt = {};\n  }\n  if (typeof opt.end === 'undefined') {\n    opt.end = true;\n  }\n\n  if (this.isStream()) {\n    return this.contents.pipe(stream, opt);\n  }\n  if (this.isBuffer()) {\n    if (opt.end) {\n      stream.end(this.contents);\n    } else {\n      stream.write(this.contents);\n    }\n    return stream;\n  }\n\n  // Check if isNull\n  if (opt.end) {\n    stream.end();\n  }\n  return stream;\n};\n\nFile.prototype.inspect = function() {\n  var inspect = [];\n\n  // Use relative path if possible\n  var filePath = (this.base && this.path) ? this.relative : this.path;\n\n  if (filePath) {\n    inspect.push('\"' + filePath + '\"');\n  }\n\n  if (this.isBuffer()) {\n    inspect.push(this.contents.inspect());\n  }\n\n  if (this.isStream()) {\n    inspect.push(inspectStream(this.contents));\n  }\n\n  return '<File ' + inspect.join(' ') + '>';\n};\n\nFile.isVinyl = function(file) {\n  return (file && file._isVinyl === true) || false;\n};\n\n// Virtual attributes\n// Or stuff with extra logic\nObject.defineProperty(File.prototype, 'contents', {\n  get: function() {\n    return this._contents;\n  },\n  set: function(val) {\n    if (!isBuffer(val) && !isStream(val) && !isNull(val)) {\n      throw new Error('File.contents can only be a Buffer, a Stream, or null.');\n    }\n    this._contents = val;\n  },\n});\n\n// TODO: Should this be moved to vinyl-fs?\nObject.defineProperty(File.prototype, 'relative', {\n  get: function() {\n    if (!this.base) {\n      throw new Error('No base specified! Can not get relative.');\n    }\n    if (!this.path) {\n      throw new Error('No path specified! Can not get relative.');\n    }\n    return path.relative(this.base, this.path);\n  },\n  set: function() {\n    throw new Error('File.relative is generated from the base and path attributes. Do not modify it.');\n  },\n});\n\nObject.defineProperty(File.prototype, 'dirname', {\n  get: function() {\n    if (!this.path) {\n      throw new Error('No path specified! Can not get dirname.');\n    }\n    return path.dirname(this.path);\n  },\n  set: function(dirname) {\n    if (!this.path) {\n      throw new Error('No path specified! Can not set dirname.');\n    }\n    this.path = path.join(dirname, path.basename(this.path));\n  },\n});\n\nObject.defineProperty(File.prototype, 'basename', {\n  get: function() {\n    if (!this.path) {\n      throw new Error('No path specified! Can not get basename.');\n    }\n    return path.basename(this.path);\n  },\n  set: function(basename) {\n    if (!this.path) {\n      throw new Error('No path specified! Can not set basename.');\n    }\n    this.path = path.join(path.dirname(this.path), basename);\n  },\n});\n\n// Property for getting/setting stem of the filename.\nObject.defineProperty(File.prototype, 'stem', {\n  get: function() {\n    if (!this.path) {\n      throw new Error('No path specified! Can not get stem.');\n    }\n    return path.basename(this.path, this.extname);\n  },\n  set: function(stem) {\n    if (!this.path) {\n      throw new Error('No PassThrough specified! Can not set stem.');\n    }\n    this.path = path.join(path.dirname(this.path), stem + this.extname);\n  },\n});\n\nObject.defineProperty(File.prototype, 'extname', {\n  get: function() {\n    if (!this.path) {\n      throw new Error('No path specified! Can not get extname.');\n    }\n    return path.extname(this.path);\n  },\n  set: function(extname) {\n    if (!this.path) {\n      throw new Error('No path specified! Can not set extname.');\n    }\n    this.path = replaceExt(this.path, extname);\n  },\n});\n\nObject.defineProperty(File.prototype, 'path', {\n  get: function() {\n    return this.history[this.history.length - 1];\n  },\n  set: function(path) {\n    if (typeof path !== 'string') {\n      throw new Error('path should be string');\n    }\n\n    // Record history only when path changed\n    if (path && path !== this.path) {\n      this.history.push(path);\n    }\n  },\n});\n\nmodule.exports = File;\n"]}