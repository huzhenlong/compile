{"version":3,"sources":["writeDir.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,KAAK,QAAQ,aAAR,CAAT;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;;AAEA,IAAI,KAAK,QAAQ,sBAAR,CAAT;;AAEA,SAAS,QAAT,CAAkB,SAAlB,EAA6B,IAA7B,EAAmC,OAAnC,EAA4C;AAC1C,MAAI,aAAa;AACf,UAAM,KAAK,IAAL,CAAU,IADD;AAEf,QAAI;AAFW,GAAjB;AAIA,SAAO,SAAP,EAAkB,UAAlB,EAA8B,QAA9B;;AAEA,WAAS,QAAT,CAAkB,SAAlB,EAA6B;AAC3B,QAAI,SAAJ,EAAe;AACb,aAAO,QAAQ,SAAR,CAAP;AACD;;AAED,OAAG,IAAH,CAAQ,SAAR,EAAmB,GAAnB,EAAwB,MAAxB;AACD;;AAED,WAAS,MAAT,CAAgB,OAAhB,EAAyB,EAAzB,EAA6B;;AAE3B,QAAI,eAAe,OAAf,CAAJ,EAA6B;AAC3B,aAAO,GAAG,OAAH,CAAW,IAAX,EAAiB,EAAjB,EAAqB,OAArB,CAAP;AACD;;AAED,QAAI,OAAJ,EAAa;AACX,aAAO,GAAG,OAAH,CAAW,OAAX,EAAoB,EAApB,EAAwB,OAAxB,CAAP;AACD;;AAED,OAAG,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,QAA5B;AACD;;AAED,WAAS,QAAT,CAAkB,OAAlB,EAA2B,EAA3B,EAA+B;AAC7B,OAAG,OAAH,CAAW,OAAX,EAAoB,EAApB,EAAwB,OAAxB;AACD;AACF;;AAED,SAAS,cAAT,CAAwB,GAAxB,EAA6B;AACzB,MAAI,CAAC,GAAL,EAAU;AACR,WAAO,KAAP;AACD;;AAED,MAAI,IAAI,IAAJ,KAAa,QAAjB,EAA2B;AACzB,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD;;AAEH,OAAO,OAAP,GAAiB,QAAjB","file":"writeDir-compiled.js","sourcesContent":["'use strict';\n\nvar fs = require('graceful-fs');\nvar mkdirp = require('mkdirp');\n\nvar fo = require('../../fileOperations');\n\nfunction writeDir(writePath, file, written) {\n  var mkdirpOpts = {\n    mode: file.stat.mode,\n    fs: fs,\n  };\n  mkdirp(writePath, mkdirpOpts, onMkdirp);\n\n  function onMkdirp(mkdirpErr) {\n    if (mkdirpErr) {\n      return written(mkdirpErr);\n    }\n\n    fs.open(writePath, 'r', onOpen);\n  }\n\n  function onOpen(openErr, fd) {\n    // If we don't have access, just move along\n    if (isInaccessible(openErr)) {\n      return fo.closeFd(null, fd, written);\n    }\n\n    if (openErr) {\n      return fo.closeFd(openErr, fd, written);\n    }\n\n    fo.updateMetadata(fd, file, onUpdate);\n  }\n\n  function onUpdate(statErr, fd) {\n    fo.closeFd(statErr, fd, written);\n  }\n}\n\nfunction isInaccessible(err) {\n    if (!err) {\n      return false;\n    }\n\n    if (err.code === 'EACCES') {\n      return true;\n    }\n\n    return false;\n  }\n\nmodule.exports = writeDir;\n"]}