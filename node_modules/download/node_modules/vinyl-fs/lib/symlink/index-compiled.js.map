{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,WAAW,QAAQ,UAAR,CAAf;AACA,IAAI,KAAK,QAAQ,aAAR,CAAT;AACA,IAAI,eAAe,QAAQ,iBAAR,CAAnB;;AAEA,SAAS,OAAT,CAAiB,SAAjB,EAA4B,GAA5B,EAAiC;AAC/B,WAAS,QAAT,CAAkB,IAAlB,EAAwB,GAAxB,EAA6B,EAA7B,EAAiC;AAC/B,QAAI,UAAU,KAAK,IAAnB;AACA,QAAI,UAAW,KAAK,WAAL,KAAqB,KAArB,GAA6B,MAA5C;AACA,iBAAa,SAAb,EAAwB,IAAxB,EAA8B,GAA9B,EAAmC,UAAS,GAAT,EAAc,SAAd,EAAyB;AAC1D,UAAI,GAAJ,EAAS;AACP,eAAO,GAAG,GAAH,CAAP;AACD;AACD,SAAG,OAAH,CAAW,OAAX,EAAoB,SAApB,EAA+B,OAA/B,EAAwC,UAAS,GAAT,EAAc;AACpD,YAAI,OAAO,IAAI,IAAJ,KAAa,QAAxB,EAAkC;AAChC,iBAAO,GAAG,GAAH,CAAP;AACD;AACD,WAAG,IAAH,EAAS,IAAT;AACD,OALD;AAMD,KAVD;AAWD;;AAED,MAAI,SAAS,SAAS,GAAT,CAAa,GAAb,EAAkB,QAAlB,CAAb;;AAEA,SAAO,MAAP;AACA,SAAO,MAAP;AACD;;AAED,OAAO,OAAP,GAAiB,OAAjB","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar through2 = require('through2');\nvar fs = require('graceful-fs');\nvar prepareWrite = require('../prepareWrite');\n\nfunction symlink(outFolder, opt) {\n  function linkFile(file, enc, cb) {\n    var srcPath = file.path;\n    var symType = (file.isDirectory() ? 'dir' : 'file');\n    prepareWrite(outFolder, file, opt, function(err, writePath) {\n      if (err) {\n        return cb(err);\n      }\n      fs.symlink(srcPath, writePath, symType, function(err) {\n        if (err && err.code !== 'EEXIST') {\n          return cb(err);\n        }\n        cb(null, file);\n      });\n    });\n  }\n\n  var stream = through2.obj(opt, linkFile);\n  // TODO: option for either backpressure or lossy\n  stream.resume();\n  return stream;\n}\n\nmodule.exports = symlink;\n"]}