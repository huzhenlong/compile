{"version":3,"sources":["smartgroup.filter.js"],"names":[],"mappings":"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","file":"smartgroup.filter-compiled.js","sourcesContent":["/**\r\n * Created by hzl on 2015/10/10.\r\n */\r\n(function ($, window, document, undefined) {\r\n    $.fn.smartGroupFilter = function (setting) {\r\n        var plugin = this;\r\n        //region 初始化设置\r\n        var options = {};\r\n        //继承smartgroup的options\r\n        if (setting && setting.smartGroup) {\r\n            options = $.extend({}, setting.smartGroup.options, setting);\r\n        } else {\r\n            options = $.extend({}, setting);\r\n        }\r\n        plugin.options = options;\r\n        //endregion\r\n\r\n        //region 按钮及类型\r\n\r\n        //按钮组数据\r\n        var filterButtons = MemberFilters;\r\n        //endregion\r\n\r\n        //region 生成按钮\r\n        //获取按钮的文本text\r\n        var getObjectValue = function (obj, name, defaultValue) {\r\n            if (typeof obj == 'undefined' || typeof obj[name] == 'undefined') {\r\n                return defaultValue;\r\n            }\r\n            return obj[name];\r\n        };\r\n\r\n        //创建form\r\n        var getFilterElements = function (content, column) {\r\n            var inputBox = '<input class=\"inputBox validator\" type=\"text\" value=\"\"  name=\"content\">';\r\n            var numberBox = '<input class=\"numberBox validator\" type=\"number\" value=\"\" min=\"0\" name=\"content\">';\r\n            var numberRange = '<input class=\"beginNumber validator\" type=\"number\">' +\r\n                '-<input class=\"endNumber validator\" type=\"number\">';\r\n            var dataBox = '<input class=\"dataBox validator\" type=\"date\" value=\"\" name=\"content\">';\r\n            var dataRange = '<input class=\"beginData validator\" type=\"date\" value=\"\" name=\"beginTime\">' +\r\n                '-<input class=\"endData validator\" type=\"date\" value=\"\" name=\"endTime\">';\r\n            var operationOne = '<select name=\"operate\" class=\"operate\"><option value=\"like\">'+TxtContent.like+'</option><option value=\"notLike\">'+TxtContent.noLike+'</option>'\r\n                + '<option value=\"equal\">'+TxtContent.equal+'</option><option value=\"notEqual\">'+TxtContent.noEqual+'</option></select>';\r\n            var operationTwo = '<select name=\"operate\" class=\"operate\"><option value=\"in\">'+TxtContent.in+'</option><option value=\"notIn\">'+TxtContent.noIn+'</option></select>';\r\n            var operationThree = '<select name=\"operate\" class=\"operate\"><option value=\"equal\">'+TxtContent.equal+'</option>'\r\n                + '<option value=\"lessThan\">'+TxtContent.lessThan+'</option><option value=\"moreThan\">'+TxtContent.moreThan+'</option>' +\r\n                '<option value=\"moreThanOrEqual\">'+TxtContent.moreThanOrEqual+'</option><option value=\"lessThanOrEqual\">'+TxtContent.lessThanOrEqual+'</option></select>';\r\n            var operationFour = '<select class=\"operate timeType\"><option value=\"year\">'+TxtContent.year+'</option>'\r\n                + '<option value=\"month\">'+TxtContent.month+'</option><option value=\"day\">'+TxtContent.day+'</option><option value=\"hour\">'+TxtContent.hour+'</option></select>';\r\n            var operationFive = '<select class=\"operate validator actionType\"><option value=\"\">'+TxtContent.sel+'</option><option value=\"sms\">'+TxtContent.sms+'</option>'\r\n                + '<option value=\"email\">'+TxtContent.mail+'</option></select><select class=\"behavior operate validator action\"><option value=\"\">'+TxtContent.sel+'</option></select>';\r\n            var operation = '';\r\n            switch (content.type) {\r\n                case CONTENT_TYPE.INPUT:\r\n                    operation = operationOne + inputBox;\r\n                    break;\r\n                case CONTENT_TYPE.LIST:\r\n                    operationTwo += '<span class=\"select-group\">';\r\n                    $.each(content.urls, function (i, url) {\r\n                        operationTwo += '<select data-type=\"' + url.type + '\" data-filter-name=\"' + encodeURIComponent(url.filter_name) +\r\n                            '\" style=\"width:200px;display:block;\" data-text=\"' + encodeURIComponent(url.text) +\r\n                            '\" data-url=\"' + encodeURIComponent(url.url) +\r\n                            '\" data-idname=\"' + url.idName +\r\n                            '\" data-textname=\"' + url.textName +\r\n                            '\" data-name=\"' + encodeURIComponent(url.name) + '\" data-datacon=' + JSON.stringify(url.dataCon) + '></select>';\r\n                    });\r\n                    operationTwo += \"</span>\";\r\n                    operation = operationTwo;\r\n                    break;\r\n                case CONTENT_TYPE.SELECT:\r\n                    var $sel = $('<select style=\"width: 100%;padding: 4px;\" name=\"' + content.name + '\" class=\"selVal validator\">' +\r\n                        '<option value=\"\">'+TxtContent.sel+'</option></select>');\r\n                    XREWIN.addOptions(content.dataCon, \"value\", \"text\", $sel);\r\n                    operation = $sel[0].outerHTML;\r\n                    break;\r\n                case CONTENT_TYPE.NUMBER:\r\n                    operation = operationThree + numberBox;\r\n                    break;\r\n                case CONTENT_TYPE.NUMBER_RANGE:\r\n                    operation = numberRange;\r\n                    break;\r\n                case CONTENT_TYPE.DATE:\r\n                    operation = operationThree + dataBox;\r\n                    break;\r\n                case CONTENT_TYPE.DATE_RANGE:\r\n                    operation = dataRange;\r\n                    break;\r\n                case CONTENT_TYPE.RELATIVE_TIME:\r\n                    operation = '<input class=\"numberBox validator timeInterval\" type=\"number\" min=\"0\">' + operationFour;\r\n                    break;\r\n                case CONTENT_TYPE.CASCADE:\r\n                    operation = operationFive;\r\n                    break;\r\n            }\r\n            return '<form data-bv-message=\"This value is not valid\" onkeydown=\"if(event.keyCode==13){return false;}\"' +\r\n                'id=\"formData' + column + '\" class=\"formAllData\" data-contentType=\"' + content.type + '\">' +\r\n                operation + '<input name=\"column\" value=\"' + column + '\" hidden></form>';\r\n\r\n\r\n        };\r\n\r\n        //创建弹出框内容\r\n        var getContent = function (button) {\r\n            var btnText = getObjectValue(button, \"text\", \"属性\");\r\n            var content = '<div><div class=\"btn-group filter-types\">';\r\n            content += '<button class=\"btn btn-success\" data-iclass=\"fa-filter\" title=\"'+TxtContent.filter+'\"><i class=\"fa fa-filter\"></i></button>';\r\n            content += '<button class=\"btn btn-white\" data-iclass=\"fa-plus\" title=\"'+TxtContent.plus+'\"><i class=\"fa fa-plus\"></i></button>';\r\n            content += '<button class=\"btn btn-white\" data-iclass=\"fa-minus\" title=\"'+TxtContent.minus+'\"><i class=\"fa fa-minus\"></i></button>' +\r\n                '<span class=\"filterName\">' + btnText + '</span></div>';\r\n            content += '<div style=\"padding: 5px 0 10px;\">';\r\n            content += getFilterElements(button.content, button.column);\r\n            content += '</div>';\r\n            content += '<div class=\"sm-popover-buttons\">';\r\n            content += '<button class=\"btn btn-primary confirm\">'+TxtContent.confirm+'</button>';\r\n            content += '<button class=\"btn btn-white cancel\">'+TxtContent.cancel+'</button>';\r\n            content += '</div>';\r\n            return content;\r\n        };\r\n\r\n        //组建按钮\r\n        var buildBtn = function (row) {\r\n            var content = '';\r\n            for (var i = 0; i < row.buttons.length; i++) {\r\n                var button = row.buttons[i];\r\n                content += '<button data-filter-table=\"' + button.table + '\" data-filter-column=\"' + button.column + '\" ';\r\n                content += 'class=\"btn btn-outline btn-white sm-row-button\"';\r\n                content += 'data-container=\"body\" data-toggle=\"popover\" data-placement=\"auto bottom\"';\r\n                content += \"data-content='\" + getContent(button) + \"'\";\r\n                content += 'data-original-title=\"\" title=\"\">' + button.text + '</button>';\r\n            }\r\n            return content;\r\n        };\r\n\r\n        //创建按钮组\r\n        var getRowButtons = function (row) {\r\n            var content = '<tr class=\"popover-options\">';\r\n            content += '<td style=\"vertical-align: text-top;\"><label class=\"sm-row-name\">' + row.name + '：</label></td><td>';\r\n            content += buildBtn(row);\r\n            content += '</td></tr>';\r\n            return content;\r\n        };\r\n\r\n        //创建tab标题\r\n        var createTabTitle = function (row) {\r\n            return '<li><a data-toggle=\"tab\" href=\"#' + row.value + '\" aria-expanded=\"false\">' + row.name + '</a></li>';\r\n        };\r\n\r\n        //创建tab内容\r\n        var createTabContent = function (row) {\r\n            var content = '<div id=\"' + row.value + '\" class=\"tab-pane\"><div class=\"panel-body sg-body\">';\r\n            content += buildBtn(row);\r\n            content += '</div></div>';\r\n            return content;\r\n        };\r\n\r\n        //多级下拉框\r\n        var select2Func = function (select, parent) {\r\n\r\n            var url = decodeURIComponent(select.data('url'));\r\n            var name = decodeURIComponent(select.data('filter-name'));\r\n            var dataCon = select.data('datacon');\r\n            //地区级联\r\n            if (name != \"undefined\") {\r\n                var names = parent.data(\"names\");\r\n\r\n                if (names) {\r\n                    for (var keyName in names) {\r\n                        if (keyName && typeof  keyName == 'string') {\r\n                            if (names.hasOwnProperty(keyName)) {\r\n                                url = XREWIN.appendParam(url, keyName, names[keyName].join(','));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                var key = XREWIN.getUrlParam(\"key\");\r\n                url = XREWIN.append\r\n                Param(url, \"group_key\", key);\r\n            }\r\n            var text = decodeURIComponent(select.data('text'));\r\n            var selectedData = select.data(\"selected_data\");\r\n            if (url != \"undefined\") {\r\n                XREWIN.ajaxGetJsonByCache(url, null, function (data) {\r\n                    select.off(\"select2:select select2:unselect\");\r\n                    select.empty();\r\n                    var selectData = DataUtil.selectData(data.data, select.data('idname'), select.data('textname'));\r\n                    select.select2({\r\n                        data: selectData,\r\n                        multiple: true,\r\n                        placeholder: text,\r\n                        tag: true\r\n                    });\r\n\r\n                    if (name) {\r\n                        if (selectedData && selectedData.length > 0) {\r\n                            var selectIds = [];\r\n                            for (var i = 0; i < selectedData.length; i++) {\r\n                                selectIds.push(selectedData[i].id);\r\n                            }\r\n                            select.val(selectIds).trigger(\"change\");\r\n                        }\r\n                        select.on(\"select2:select select2:unselect\", function (e) {\r\n                            var changed = $(this);\r\n                            var dict = parent.data(\"names\");\r\n                            if (!dict) {\r\n                                dict = {};\r\n                            }\r\n                            dict[name] = [];\r\n                            $.each(changed.select2('data'), function (i, n) {\r\n                                dict[name].push(n.id);\r\n                            });\r\n                            parent.data(\"names\", dict);\r\n                            changed.data(\"selected_data\", changed.select2('data'));\r\n\r\n                            var selects = changed.nextAll(\"select\");\r\n                            selects.each(function () {\r\n                                var that = $(this);\r\n                                select2Func(that, parent);\r\n                            });\r\n                        });\r\n                    }\r\n                });\r\n            } else {\r\n                if (dataCon) {\r\n                    select.select2({\r\n                        data: dataCon,\r\n                        multiple: true,\r\n                        placeholder: text,\r\n                        tag: true\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        //endregion\r\n\r\n        var filtering = null;\r\n        //初始化\r\n        var init = function (groupKey) {\r\n            //判断应用场景\r\n            var scene = plugin.options.scene;\r\n            if (scene == 'modal') {\r\n                var tabUl = $('<ul class=\"nav nav-tabs\"></ul>');\r\n                var tabContent = $('<div class=\"tab-content\"></div>');\r\n                for (var i = 0; i < filterButtons.length; i++) {\r\n                    //tab标题\r\n                    tabUl.append(createTabTitle(filterButtons[i]));\r\n                    //tab内容\r\n                    tabContent.append(createTabContent(filterButtons[i]));\r\n                }\r\n                tabUl.find('li:first').addClass('active').attr('aria-expanded', true);\r\n                tabContent.find('.tab-pane:first').addClass('active');\r\n                var tabs = $('<div class=\"tabs-container sg-tabs-container\"></div>').append(tabUl, tabContent);\r\n                $(plugin).append(tabs);\r\n            } else {\r\n                //把按钮追加到页面中\r\n                var table = $(document.createElement(\"table\")).appendTo(plugin);\r\n                for (var i = 0; i < filterButtons.length; i++) {\r\n                    $(getRowButtons(filterButtons[i])).appendTo(table);\r\n                }\r\n            }\r\n\r\n\r\n            //把内容添加到按钮上\r\n            var pops = plugin.find(\"button\").popover({html: true, trigger: 'click'});\r\n\r\n            //关闭弹框\r\n            var closePop = function () {\r\n                if (filtering == null) {\r\n                    console.log(\"closePop.filtering is null\");\r\n                    return;\r\n                }\r\n                filtering.removeClass(\"btn-success\").addClass(\"btn-white\");\r\n                filtering.click();\r\n                filtering = null;\r\n            };\r\n\r\n            plugin.closePopFun = closePop;\r\n\r\n            //点击同一个按钮\r\n            pops.on(\"click\", function () {\r\n                if ($(this).attr(\"byClick\")) {\r\n                    filtering = null;\r\n                    $(this).removeAttr(\"byClick\");\r\n                } else {\r\n                    $(this).attr(\"byClick\", \"byClick\");\r\n                }\r\n            });\r\n\r\n            //显示弹框时显示\r\n            pops.on(\"shown.bs.popover\", function () {\r\n                var $pop = $(this);\r\n                //data里的数据用小写\r\n                var table = $pop.data(\"filter-table\");\r\n                var column = $pop.data(\"filter-column\");\r\n                //判断点击不同的按钮\r\n                if (filtering) {\r\n                    if (filtering.data(\"filter-table\") == table && filtering.data(\"filter-column\") == column) {\r\n                        console.debug(\"click same button\")\r\n                    }\r\n                    else {\r\n                        filtering.removeClass(\"btn-success\").addClass(\"btn-white\");\r\n                        filtering.click();\r\n                    }\r\n                }\r\n\r\n                filtering = $pop;\r\n                //按钮选中样式\r\n                $pop.removeClass(\"btn-white\").addClass(\"btn-success\");\r\n                var filterClass = 'fa-filter';\r\n                //选中节点数据\r\n                var objData = {\r\n                    iClass: filterClass,\r\n                    table: table,\r\n                    column: column\r\n                };\r\n                //获取弹框数据\r\n                var obj = $pop.data(\"bs.popover\");\r\n                //获取弹框html\r\n                var tip = obj.tip();\r\n\r\n                //营销行为\r\n                tip.find(\".actionType\").on(\"change\", function () {\r\n                    var sel = tip.find(\".action\");\r\n                    if ($(this).val() == \"sms\") {\r\n                        sel.empty().append('<option value=\"sendSuccess\">'+TxtContent.sendSuccess+'</option>'\r\n                            + '<option value=\"invalidTel\">'+TxtContent.invalidTel+'</option><option value=\"click\">'+TxtContent.click+'</option>');\r\n                    }\r\n                    else if ($(this).val() == \"email\") {\r\n                        sel.empty().append('<option value=\"sendSuccess\">'+TxtContent.sendSuccess+'</option>' +\r\n                            '<option value=\"open\">'+TxtContent.open+'</option><option value=\"click\">'+TxtContent.click+'</option>' +\r\n                            '<option value=\"filterCount\">'+TxtContent.filterCount+'</option><option value=\"formatError\">'+TxtContent.formatError+'</option>' +\r\n                            '<option value=\"onceSubmitRepeat\">'+TxtContent.onceSubmitRepeat+'</option><option value=\"sendUnreg\">'+TxtContent.sendUnreg+'</option>' +\r\n                            '<option value=\"sendInvalid\">'+TxtContent.sendInvalid+'</option><option value=\"backEmail\">'+TxtContent.backEmail+'</option>' +\r\n                            '<option value=\"emailAddressInvalid\">'+TxtContent.emailAddressInvalid+'</option><option value=\"serverReject\">'+TxtContent.serverReject+'</option>' +\r\n                            '<option value=\"unreg\">'+TxtContent.unreg+'</option>'\r\n                        );\r\n                    }\r\n                });\r\n\r\n                //省市级联动\r\n                tip.find(\".select-group\").each(function () {\r\n                    var parent = $(this);\r\n                    var selects = parent.find(\"select\");\r\n                    selects.each(function () {\r\n                        var that = $(this);\r\n                        select2Func(that, parent);\r\n                        tip.find('select[name=\"operate\"]').css(\"width\", \"100%\");\r\n                    });\r\n                });\r\n\r\n                //点击取消\r\n                tip.find(\".cancel\").unbind(\"click.smg.filter\").bind(\"click.smg.filter\", function () {\r\n                    closePop();\r\n                });\r\n\r\n                //点击筛选按钮\r\n                tip.find(\".filter-types button\").bind(\"click\", function () {\r\n                    $(this).parent().find(\"button.btn-success\").removeClass(\"btn-success\").addClass(\"btn-white\");\r\n                    $(this).removeClass(\"btn-white\").addClass(\"btn-success\");\r\n                    objData.iClass = $(this).data(\"iclass\");\r\n                });\r\n\r\n                tip.unbind(\"keydown\").bind(\"keydown\", function (e) {\r\n                    if (event.keyCode == 13) {\r\n                        tip.find(\".confirm\").trigger(\"click\");\r\n                        e.stopPropagation();\r\n                    }\r\n                });\r\n\r\n                //点击确定按钮\r\n                tip.find(\".confirm\").unbind(\"click.smg.filter\").bind(\"click.smg.filter\", function () {\r\n                    XREWIN.skipPrompt(TxtContent.skipPrompt);\r\n                    var formId = tip.find(\"form\").attr(\"id\");\r\n                    var curNodeId = \"\";\r\n                    var conType = tip.find(\"form\");\r\n                    if (options.smartGroup) {\r\n                        curNodeId = options.smartGroup.getFatherId();\r\n                    }\r\n                    var contentType = conType.attr(\"data-contentType\");\r\n                    //formData数据\r\n                    var fd = new FormData(document.getElementById(formId));\r\n                    //追加数据\r\n                    fd.append(\"tableName\", table);\r\n                    fd.append(\"relationType\", objData.iClass);\r\n                    fd.append(\"type\", contentType);\r\n                    fd.append(\"groupKey\", groupKey);\r\n                    var dataContent = {\"mark\": true};\r\n                    switch (contentType) {\r\n                        case \"relative-time\":\r\n                            dataContent.timeInterval = tip.find(\".timeInterval\").val();\r\n                            dataContent.timeType = tip.find(\".timeType\").val();\r\n                            delete dataContent.mark;\r\n                            break;\r\n                        case \"cascade\":\r\n                            dataContent.actionType = tip.find(\".actionType\").val();\r\n                            dataContent.action = tip.find(\".action\").val();\r\n                            delete dataContent.mark;\r\n                            break;\r\n                        case \"number-range\":\r\n                            dataContent.beginNumber = tip.find(\".beginNumber\").val();\r\n                            dataContent.endNumber = tip.find(\".endNumber\").val();\r\n                            delete dataContent.mark;\r\n                            break;\r\n                    }\r\n                    if (!dataContent.mark) {\r\n                        fd.append(\"content\", JSON.stringify(dataContent));\r\n                    }\r\n\r\n                    var nameText = tip.find(\".filterName\").text();\r\n                    var operation = tip.find('select[name=\"operate\"]').find(\"option:selected\").text();\r\n                    //组建文本\r\n                    var produceText = \"\";\r\n                    switch (contentType) {\r\n                        case \"input\":\r\n                            var inputVal = tip.find(\".inputBox\").val();\r\n                            produceText += '<b>' + nameText + '</b><em>' + operation + '</em>' + inputVal;\r\n                            break;\r\n                        case  \"list\":\r\n                            tip.find('.select-group select').each(function () {\r\n                                var sel = $(this);\r\n                                var arrayVal = sel.select2(\"data\");\r\n                                var objArray = [];\r\n                                for (var i = 0; i < arrayVal.length; i++) {\r\n                                    objArray.push(arrayVal[i].text);\r\n                                }\r\n                                if (objArray) {\r\n                                    var stringVal = objArray.join('&&');\r\n                                    produceText += '<b>' + decodeURIComponent(sel.data(\"text\")) + '</b><em>' + operation + '</em>' + stringVal + '<br/>';\r\n                                }\r\n                            });\r\n                            break;\r\n                        case \"date\":\r\n                            var dataVal = tip.find(\".dataBox\").val();\r\n                            produceText += '<b>' + nameText + '</b><em>' + operation + '</em>' + dataVal;\r\n                            break;\r\n                        case \"date-range\":\r\n                            var beginData = tip.find(\".beginData\").val();\r\n                            var endData = tip.find(\".endData\").val();\r\n                            produceText += '<b>' + nameText + '</b><em>'+TxtContent.from+'</em>' + beginData + '<em>'+TxtContent.to+'</em>' + endData;\r\n                            break;\r\n                        case \"number\":\r\n                            var numVal = tip.find(\".numberBox\").val();\r\n                            produceText += '<b>' + nameText + '</b><em>' + operation + '</em>' + numVal;\r\n                            break;\r\n                        case \"select-str\":\r\n                            var selVal = tip.find(\".selVal\").val();\r\n                            produceText += '<b>' + nameText + '</b><em>'+TxtContent.be+'</em>' + selVal;\r\n                            break;\r\n                        case \"relative-time\":\r\n                            var day = tip.find(\".numberBox\").val();\r\n                            var type = tip.find(\".timeType option:selected\").text();\r\n                            produceText += '<b>' + nameText + '</b><em>'+TxtContent.be+'</em>' + day + type;\r\n                            break;\r\n                        case \"cascade\":\r\n                            var sendType = tip.find(\".actionType option:selected\").text();\r\n                            var behavior = tip.find(\".action option:selected\").text();\r\n                            produceText += '<b>' + nameText + '</b><em>' + sendType + '-</em>' + behavior;\r\n                            break;\r\n                        case \"number-range\":\r\n                            var beginNumber = tip.find(\".beginNumber\").val();\r\n                            var endNumber = tip.find(\".endNumber\").val();\r\n                            produceText += '<b>' + nameText + '</b><em>'+TxtContent.from+'</em>' + beginNumber + '<em>'+TxtContent.to+'</em>' + endNumber;\r\n                            break;\r\n                    }\r\n\r\n                    var stringVal, zoneList = {};\r\n                    tip.find('.select-group select').each(function () {\r\n                        var sel_group = $(this);\r\n                        var selName = sel_group.data(\"name\");\r\n                        var arrayVal = sel_group.select2(\"val\");\r\n                        if (arrayVal) {\r\n\r\n                            if (sel_group.data(\"type\") == \"int\") {\r\n                                stringVal = arrayVal.join();\r\n                            } else if (sel_group.data(\"type\") == \"zone\") {\r\n                                zoneList[selName] = \"'\" + arrayVal.join(\"','\") + \"'\";\r\n                                stringVal = JSON.stringify(zoneList);\r\n                            } else {\r\n                                stringVal = \"'\" + arrayVal.join(\"','\") + \"'\";\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    if (stringVal) {\r\n                        fd.append(\"content\", stringVal);\r\n                    }\r\n\r\n\r\n                    //判断table的智能分组\r\n                    if (typeof plugin.options.func == \"function\") {\r\n                        var row = {\r\n                            'iClass': objData.iClass,\r\n                            'text': produceText\r\n                        };\r\n                        plugin.options.func(fd, row);\r\n                        closePop(filtering);\r\n                        return false;\r\n                    } else {\r\n                        XREWIN.loadingType = \"toast\";\r\n                        if (XREWIN.loading) {\r\n                            return false;\r\n                        }\r\n                        fd.append(\"parentId\", curNodeId || 'parentId');\r\n\r\n\r\n                        //添加节点数据\r\n                        var addNode = function (fd) {\r\n                            if (options.smartGroup) {\r\n                                options.smartGroup.addNode(fd, function () {\r\n                                    var data = this.split(',');\r\n                                    options.smartGroup.addBlock({\r\n                                        \"iClass\": objData.iClass,\r\n                                        \"id\": data[0],\r\n                                        \"text\": produceText,\r\n                                        \"count\": data[1] || -1\r\n                                    });\r\n                                });\r\n                            }\r\n                        };\r\n\r\n\r\n                        //判断input的值是否为空\r\n                        var inputCon = conType.find(\".validator\").val();\r\n                        var area = conType.find(\".select2-selection__rendered\").text();\r\n                        if (!inputCon) {\r\n                            conType.find(\".validator\").css({\"border\": \"1px solid red\", \"padding-left\": \"5px\"})\r\n                                .attr(\"placeholder\", TxtContent.dataIsNull);\r\n                            if (area) {\r\n                                //添加节点\r\n                                addNode(fd);\r\n                                closePop(filtering);\r\n                            } else {\r\n                                conType.find(\".select2-selection__rendered\").text(TxtContent.dataIsNull).css(\"padding\", \"5px\");\r\n                            }\r\n                        } else {\r\n                            //添加节点\r\n\r\n                            addNode(fd);\r\n                            closePop(filtering);\r\n                        }\r\n                        XREWIN.loadingType = \"\";\r\n                    }\r\n                });\r\n                return $pop;\r\n            });\r\n        };\r\n\r\n\r\n        //初始化\r\n        init(plugin.options.groupKey || '');\r\n\r\n        return plugin;\r\n    }\r\n})(jQuery, window, document);"]}