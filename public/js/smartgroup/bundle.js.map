{"version":3,"sources":["smart.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["/**\n * Created by hzl on 2015/10/10.\n */\nimport 'babel-polyfill';\n(function ($, window, document, undefined) {\n\n    $.fn.smartGroupFilter = function (setting, filterButtons = MemberFilters) {\n        let plugin = this;\n        //region 初始化设置\n        let options = {};\n\n        //继承smartgroup的options\n        if (setting && setting.smartGroup) {\n            options = Object.assign({}, setting.smartGroup.options, setting);\n        } else {\n            options = Object.assign({}, setting);\n        }\n\n\n\n        plugin.options = options;\n        //endregion\n\n        //region 按钮及类型\n\n        //endregion\n\n        //region 生成按钮\n        //获取按钮的文本text\n        let getObjectValue = (obj, name, defaultValue) => {\n            if (typeof obj == 'undefined' || typeof obj[name] == 'undefined') {\n                return defaultValue;\n            }\n            return obj[name];\n        };\n\n\n        //创建form\n        let getFilterElements = (content, column) => {\n            let inputBox = `<input class=\"inputBox validator\" type=\"text\" value=\"\"  name=\"content\">`;\n            let numberBox = `<input class=\"numberBox validator\" type=\"number\" value=\"\" min=\"0\" name=\"content\">`;\n            let numberRange = `<input class=\"beginNumber validator\" type=\"number\">\n                -<input class=\"endNumber validator\" type=\"number\">`;\n            let dataBox = `<input class=\"dataBox validator\" type=\"date\" value=\"\" name=\"content\">`;\n            let dataRange = `<input class=\"beginData validator\" type=\"date\" value=\"\" name=\"beginTime\">\n                -<input class=\"endData validator\" type=\"date\" value=\"\" name=\"endTime\">`;\n            let operationOne = `<select name=\"operate\" class=\"operate\"><option value=\"like\">\n                ${TxtContent.like}</option><option value=\"notLike\">${TxtContent.noLike }</option><option value=\"equal\">\n                ${ TxtContent.equal }</option><option value=\"notEqual\">${TxtContent.noEqual }</option></select>`;\n\n            let operationTwo = `<select name=\"operate\" class=\"operate\"><option value=\"in\">${TxtContent.in}\n                </option><option value=\"notIn\">${ TxtContent.noIn }</option></select>`;\n            let operationThree = `<select name=\"operate\" class=\"operate\"><option value=\"equal\">${TxtContent.equal}</option>\n                <option value=\"lessThan\">${TxtContent.lessThan } </option><option value=\"moreThan\">${ TxtContent.moreThan} </option>\n                <option value=\"moreThanOrEqual\">${TxtContent.moreThanOrEqual }</option><option value=\"lessThanOrEqual\">${TxtContent.lessThanOrEqual}\n                </option></select>`;\n            let operationFour = `<select class=\"operate timeType\"><option value=\"year\">${TxtContent.year} </option>\n                <option value=\"month\">${TxtContent.month}  </option><option value=\"day\">${TxtContent.day}</option><option value=\"hour\">\n                 ${TxtContent.hour }</option></select>`;\n            let operationFive = `<select class=\"operate validator actionType\"><option value=\"\">${TxtContent.sel }</option><option value=\"sms\">\n                ${TxtContent.sms }</option>\n                <option value=\"email\">${ TxtContent.mail}</option></select><select class=\"behavior operate validator action\"><option value=\"\">\n                 ${TxtContent.sel }</option></select>`;\n            let operation = '';\n            switch (content.type) {\n                case CONTENT_TYPE.INPUT:\n                    operation = operationOne + inputBox;\n                    break;\n                case CONTENT_TYPE.LIST:\n                    operationTwo += '<span class=\"select-group\">';\n                    $.each(content.urls, function (i, url) {\n                        operationTwo += `<select data-type=\"${url.type}\" data-filter-name=\"${encodeURIComponent(url.filter_name)}\"\n                            style=\"width:200px;display:block;\" data-text=\"${encodeURIComponent(url.text)}\"\n                            data-url=\"${encodeURIComponent(url.url)}\"\n                            data-idname=\"${url.idName}\"\n                            data-textname=\"${url.textName}\"\n                            data-name=\"${encodeURIComponent(url.name)}\" data-datacon=\"${JSON.stringify(url.dataCon)}\"></select>`;\n                    });\n                    operationTwo += \"</span>\";\n                    operation = operationTwo;\n                    break;\n                case CONTENT_TYPE.SELECT:\n                    var $sel = $(`<select style=\"width: 100%;padding: 4px;\" name=\"${content.name} \" class=\"selVal validator\">\n                        <option value=\"\">${ TxtContent.sel} </option></select>`);\n                    XREWIN.addOptions(content.dataCon, \"value\", \"text\", $sel);\n                    operation = $sel[0].outerHTML;\n                    break;\n                case CONTENT_TYPE.NUMBER:\n                    operation = operationThree + numberBox;\n                    break;\n                case CONTENT_TYPE.NUMBER_RANGE:\n                    operation = numberRange;\n                    break;\n                case CONTENT_TYPE.DATE:\n                    operation = operationThree + dataBox;\n                    break;\n                case CONTENT_TYPE.DATE_RANGE:\n                    operation = dataRange;\n                    break;\n                case CONTENT_TYPE.RELATIVE_TIME:\n                    operation = '<input class=\"numberBox validator timeInterval\" type=\"number\" min=\"0\">' + operationFour;\n                    break;\n                case CONTENT_TYPE.CASCADE:\n                    operation = operationFive;\n                    break;\n            }\n\n            return `<form data-bv-message=\"This value is not valid\" onkeydown=\"if(event.keyCode==13){return false;}\"\n                id=\"formData${column} \" class=\"formAllData\" data-contentType=\"${content.type}\">\n                ${operation}<input name=\"column\" value=\"${column}\" hidden /></form>`;\n\n            /*let GetFilterElements = React.createClass({\n             render() {\n             return (\n             <form data-bv-message=\"This value is not valid\" onkeydown=\"if(event.keyCode==13){return false;}\"\n             id=\"formData{ column}\" className=\"formAllData\" data-contentType=\"{content.type }\">\n             { operation }\n             <input name=\"column\" value=\"{ column }\" hidden/>\n             </form>\n             );\n             }\n             });*/\n\n\n        };\n\n\n        //创建弹出框内容\n        var getContent = function (button) {\n            var btnText = getObjectValue(button, \"text\", \"属性\");\n            var content = '<div><div class=\"btn-group filter-types\">';\n            content += '<button class=\"btn btn-success\" data-iclass=\"fa-filter\" title=\"' + TxtContent.filter + '\"><i class=\"fa fa-filter\"></i></button>';\n            content += '<button class=\"btn btn-white\" data-iclass=\"fa-plus\" title=\"' + TxtContent.plus + '\"><i class=\"fa fa-plus\"></i></button>';\n            content += '<button class=\"btn btn-white\" data-iclass=\"fa-minus\" title=\"' + TxtContent.minus + '\"><i class=\"fa fa-minus\"></i></button>' +\n                '<span class=\"filterName\">' + btnText + '</span></div>';\n            content += '<div style=\"padding: 5px 0 10px;\">';\n            content += getFilterElements(button.content, button.column);\n            content += '</div>';\n            content += '<div class=\"sm-popover-buttons\">';\n            content += '<button class=\"btn btn-primary confirm\">' + TxtContent.confirm + '</button>';\n            content += '<button class=\"btn btn-white cancel\">' + TxtContent.cancel + '</button>';\n            content += '</div>';\n            return content;\n        };\n\n        //组建按钮\n        var buildBtn = function (row) {\n            var content = '';\n            for (var i = 0; i < row.buttons.length; i++) {\n                var button = row.buttons[i];\n                content += '<button data-filter-table=\"' + button.table + '\" data-filter-column=\"' + button.column + '\" ';\n                content += 'class=\"btn btn-outline btn-white sm-row-button\"';\n                content += 'data-container=\"body\" data-toggle=\"popover\" data-placement=\"auto bottom\"';\n                content += \"data-content='\" + getContent(button) + \"'\";\n                content += 'data-original-title=\"\" title=\"\">' + button.text + '</button>';\n            }\n            return content;\n        };\n\n        //创建按钮组\n        var getRowButtons = function (row) {\n            var content = '<tr class=\"popover-options\">';\n            content += '<td style=\"vertical-align: text-top;\"><label class=\"sm-row-name\">' + row.name + '：</label></td><td>';\n            content += buildBtn(row);\n            content += '</td></tr>';\n            return content;\n        };\n\n        //创建tab标题\n        var createTabTitle = function (row) {\n            return '<li><a data-toggle=\"tab\" href=\"#' + row.value + '\" aria-expanded=\"false\">' + row.name + '</a></li>';\n        };\n\n        //创建tab内容\n        var createTabContent = function (row) {\n            var content = '<div id=\"' + row.value + '\" class=\"tab-pane\"><div class=\"panel-body sg-body\">';\n            content += buildBtn(row);\n            content += '</div></div>';\n            return content;\n        };\n\n        //多级下拉框\n        var select2Func = function (select, parent) {\n\n            var url = decodeURIComponent(select.data('url'));\n            var name = decodeURIComponent(select.data('filter-name'));\n            var dataCon = select.data('datacon');\n            //地区级联\n            if (name != \"undefined\") {\n                var names = parent.data(\"names\");\n\n                if (names) {\n                    for (var keyName in names) {\n                        if (keyName && typeof  keyName == 'string') {\n                            if (names.hasOwnProperty(keyName)) {\n                                url = XREWIN.appendParam(url, keyName, names[keyName].join(','));\n                            }\n                        }\n                    }\n                }\n                var key = XREWIN.getUrlParam(\"key\");\n                url = XREWIN.append\n                Param(url, \"group_key\", key);\n            }\n            var text = decodeURIComponent(select.data('text'));\n            var selectedData = select.data(\"selected_data\");\n            if (url != \"undefined\") {\n                XREWIN.ajaxGetJsonByCache(url, null, function (data) {\n                    select.off(\"select2:select select2:unselect\");\n                    select.empty();\n                    var selectData = DataUtil.selectData(data.data, select.data('idname'), select.data('textname'));\n                    select.select2({\n                        data: selectData,\n                        multiple: true,\n                        placeholder: text,\n                        tag: true\n                    });\n\n                    if (name) {\n                        if (selectedData && selectedData.length > 0) {\n                            var selectIds = [];\n                            for (var i = 0; i < selectedData.length; i++) {\n                                selectIds.push(selectedData[i].id);\n                            }\n                            select.val(selectIds).trigger(\"change\");\n                        }\n                        select.on(\"select2:select select2:unselect\", function (e) {\n                            var changed = $(this);\n                            var dict = parent.data(\"names\");\n                            if (!dict) {\n                                dict = {};\n                            }\n                            dict[name] = [];\n                            $.each(changed.select2('data'), function (i, n) {\n                                dict[name].push(n.id);\n                            });\n                            parent.data(\"names\", dict);\n                            changed.data(\"selected_data\", changed.select2('data'));\n\n                            var selects = changed.nextAll(\"select\");\n                            selects.each(function () {\n                                var that = $(this);\n                                select2Func(that, parent);\n                            });\n                        });\n                    }\n                });\n            } else {\n                if (dataCon) {\n                    select.select2({\n                        data: dataCon,\n                        multiple: true,\n                        placeholder: text,\n                        tag: true\n                    });\n                }\n            }\n        };\n        //endregion\n\n        var filtering = null;\n        //初始化\n        var init = function (groupKey) {\n\n            //判断应用场景\n            var scene = plugin.options.scene;\n            if (scene == 'modal') {\n                var tabUl = $('<ul class=\"nav nav-tabs\"></ul>');\n                var tabContent = $('<div class=\"tab-content\"></div>');\n                for (var i = 0; i < filterButtons.length; i++) {\n                    //tab标题\n                    tabUl.append(createTabTitle(filterButtons[i]));\n                    //tab内容\n                    tabContent.append(createTabContent(filterButtons[i]));\n                }\n                tabUl.find('li:first').addClass('active').attr('aria-expanded', true);\n                tabContent.find('.tab-pane:first').addClass('active');\n                var tabs = $('<div class=\"tabs-container sg-tabs-container\"></div>').append(tabUl, tabContent);\n                $(plugin).append(tabs);\n            } else {\n                //把按钮追加到页面中\n                var table = $(document.createElement(\"table\")).appendTo(plugin);\n                for (var i = 0; i < filterButtons.length; i++) {\n                    $(getRowButtons(filterButtons[i])).appendTo(table);\n                }\n            }\n\n\n            //把内容添加到按钮上\n            var pops = plugin.find(\"button\").popover({html: true, trigger: 'click'});\n\n            //关闭弹框\n            var closePop = function () {\n                if (filtering == null) {\n                    console.log(\"closePop.filtering is null\");\n                    return;\n                }\n                filtering.removeClass(\"btn-success\").addClass(\"btn-white\");\n                filtering.click();\n                filtering = null;\n            };\n\n            plugin.closePopFun = closePop;\n\n            //点击同一个按钮\n            pops.on(\"click\", function () {\n                if ($(this).attr(\"byClick\")) {\n                    filtering = null;\n                    $(this).removeAttr(\"byClick\");\n                } else {\n                    $(this).attr(\"byClick\", \"byClick\");\n                }\n            });\n\n            //显示弹框时显示\n            pops.on(\"shown.bs.popover\", function () {\n                var $pop = $(this);\n                //data里的数据用小写\n                var table = $pop.data(\"filter-table\");\n                var column = $pop.data(\"filter-column\");\n                //判断点击不同的按钮\n                if (filtering) {\n                    if (filtering.data(\"filter-table\") == table && filtering.data(\"filter-column\") == column) {\n                        console.debug(\"click same button\")\n                    }\n                    else {\n                        filtering.removeClass(\"btn-success\").addClass(\"btn-white\");\n                        filtering.click();\n                    }\n                }\n\n                filtering = $pop;\n                //按钮选中样式\n                $pop.removeClass(\"btn-white\").addClass(\"btn-success\");\n                var filterClass = 'fa-filter';\n                //选中节点数据\n                var objData = {\n                    iClass: filterClass,\n                    table: table,\n                    column: column\n                };\n                //获取弹框数据\n                var obj = $pop.data(\"bs.popover\");\n                //获取弹框html\n                var tip = obj.tip();\n\n                //营销行为\n                tip.find(\".actionType\").on(\"change\", function () {\n                    var sel = tip.find(\".action\");\n                    if ($(this).val() == \"sms\") {\n                        sel.empty().append('<option value=\"sendSuccess\">' + TxtContent.sendSuccess + '</option>'\n                            + '<option value=\"invalidTel\">' + TxtContent.invalidTel + '</option><option value=\"click\">' + TxtContent.click + '</option>');\n                    }\n                    else if ($(this).val() == \"email\") {\n                        sel.empty().append('<option value=\"sendSuccess\">' + TxtContent.sendSuccess + '</option>' +\n                            '<option value=\"open\">' + TxtContent.open + '</option><option value=\"click\">' + TxtContent.click + '</option>' +\n                            '<option value=\"filterCount\">' + TxtContent.filterCount + '</option><option value=\"formatError\">' + TxtContent.formatError + '</option>' +\n                            '<option value=\"onceSubmitRepeat\">' + TxtContent.onceSubmitRepeat + '</option><option value=\"sendUnreg\">' + TxtContent.sendUnreg + '</option>' +\n                            '<option value=\"sendInvalid\">' + TxtContent.sendInvalid + '</option><option value=\"backEmail\">' + TxtContent.backEmail + '</option>' +\n                            '<option value=\"emailAddressInvalid\">' + TxtContent.emailAddressInvalid + '</option><option value=\"serverReject\">' + TxtContent.serverReject + '</option>' +\n                            '<option value=\"unreg\">' + TxtContent.unreg + '</option>'\n                        );\n                    }\n                });\n\n                //省市级联动\n                tip.find(\".select-group\").each(function () {\n                    var parent = $(this);\n                    var selects = parent.find(\"select\");\n                    selects.each(function () {\n                        var that = $(this);\n                        select2Func(that, parent);\n                        tip.find('select[name=\"operate\"]').css(\"width\", \"100%\");\n                    });\n                });\n\n                //点击取消\n                tip.find(\".cancel\").unbind(\"click.smg.filter\").bind(\"click.smg.filter\", function () {\n                    closePop();\n                });\n\n                //点击筛选按钮\n                tip.find(\".filter-types button\").bind(\"click\", function () {\n                    $(this).parent().find(\"button.btn-success\").removeClass(\"btn-success\").addClass(\"btn-white\");\n                    $(this).removeClass(\"btn-white\").addClass(\"btn-success\");\n                    objData.iClass = $(this).data(\"iclass\");\n                });\n\n                tip.unbind(\"keydown\").bind(\"keydown\", function (e) {\n                    if (event.keyCode == 13) {\n                        tip.find(\".confirm\").trigger(\"click\");\n                        e.stopPropagation();\n                    }\n                });\n\n                //点击确定按钮\n                tip.find(\".confirm\").unbind(\"click.smg.filter\").bind(\"click.smg.filter\", function () {\n                    XREWIN.skipPrompt(TxtContent.skipPrompt);\n                    var formId = tip.find(\"form\").attr(\"id\");\n                    var curNodeId = \"\";\n                    var conType = tip.find(\"form\");\n                    if (options.smartGroup) {\n                        curNodeId = options.smartGroup.getFatherId();\n                    }\n                    var contentType = conType.attr(\"data-contentType\");\n                    //formData数据\n                    var fd = new FormData(document.getElementById(formId));\n                    //追加数据\n                    fd.append(\"tableName\", table);\n                    fd.append(\"relationType\", objData.iClass);\n                    fd.append(\"type\", contentType);\n                    fd.append(\"groupKey\", groupKey);\n                    var dataContent = {\"mark\": true};\n                    switch (contentType) {\n                        case \"relative-time\":\n                            dataContent.timeInterval = tip.find(\".timeInterval\").val();\n                            dataContent.timeType = tip.find(\".timeType\").val();\n                            delete dataContent.mark;\n                            break;\n                        case \"cascade\":\n                            dataContent.actionType = tip.find(\".actionType\").val();\n                            dataContent.action = tip.find(\".action\").val();\n                            delete dataContent.mark;\n                            break;\n                        case \"number-range\":\n                            dataContent.beginNumber = tip.find(\".beginNumber\").val();\n                            dataContent.endNumber = tip.find(\".endNumber\").val();\n                            delete dataContent.mark;\n                            break;\n                    }\n                    if (!dataContent.mark) {\n                        fd.append(\"content\", JSON.stringify(dataContent));\n                    }\n\n                    var nameText = tip.find(\".filterName\").text();\n                    var operation = tip.find('select[name=\"operate\"]').find(\"option:selected\").text();\n                    //组建文本\n                    var produceText = \"\";\n                    switch (contentType) {\n                        case \"input\":\n                            var inputVal = tip.find(\".inputBox\").val();\n                            produceText += '<b>' + nameText + '</b><em>' + operation + '</em>' + inputVal;\n                            break;\n                        case  \"list\":\n                            tip.find('.select-group select').each(function () {\n                                var sel = $(this);\n                                var arrayVal = sel.select2(\"data\");\n                                var objArray = [];\n                                for (var i = 0; i < arrayVal.length; i++) {\n                                    objArray.push(arrayVal[i].text);\n                                }\n                                if (objArray) {\n                                    var stringVal = objArray.join('&&');\n                                    produceText += '<b>' + decodeURIComponent(sel.data(\"text\")) + '</b><em>' + operation + '</em>' + stringVal + '<br/>';\n                                }\n                            });\n                            break;\n                        case \"date\":\n                            var dataVal = tip.find(\".dataBox\").val();\n                            produceText += '<b>' + nameText + '</b><em>' + operation + '</em>' + dataVal;\n                            break;\n                        case \"date-range\":\n                            var beginData = tip.find(\".beginData\").val();\n                            var endData = tip.find(\".endData\").val();\n                            produceText += '<b>' + nameText + '</b><em>' + TxtContent.from + '</em>' + beginData + '<em>' + TxtContent.to + '</em>' + endData;\n                            break;\n                        case \"number\":\n                            var numVal = tip.find(\".numberBox\").val();\n                            produceText += '<b>' + nameText + '</b><em>' + operation + '</em>' + numVal;\n                            break;\n                        case \"select-str\":\n                            var selVal = tip.find(\".selVal\").val();\n                            produceText += '<b>' + nameText + '</b><em>' + TxtContent.be + '</em>' + selVal;\n                            break;\n                        case \"relative-time\":\n                            var day = tip.find(\".numberBox\").val();\n                            var type = tip.find(\".timeType option:selected\").text();\n                            produceText += '<b>' + nameText + '</b><em>' + TxtContent.be + '</em>' + day + type;\n                            break;\n                        case \"cascade\":\n                            var sendType = tip.find(\".actionType option:selected\").text();\n                            var behavior = tip.find(\".action option:selected\").text();\n                            produceText += '<b>' + nameText + '</b><em>' + sendType + '-</em>' + behavior;\n                            break;\n                        case \"number-range\":\n                            var beginNumber = tip.find(\".beginNumber\").val();\n                            var endNumber = tip.find(\".endNumber\").val();\n                            produceText += '<b>' + nameText + '</b><em>' + TxtContent.from + '</em>' + beginNumber + '<em>' + TxtContent.to + '</em>' + endNumber;\n                            break;\n                    }\n\n                    var stringVal, zoneList = {};\n                    tip.find('.select-group select').each(function () {\n                        var sel_group = $(this);\n                        var selName = sel_group.data(\"name\");\n                        var arrayVal = sel_group.select2(\"val\");\n                        if (arrayVal) {\n\n                            if (sel_group.data(\"type\") == \"int\") {\n                                stringVal = arrayVal.join();\n                            } else if (sel_group.data(\"type\") == \"zone\") {\n                                zoneList[selName] = \"'\" + arrayVal.join(\"','\") + \"'\";\n                                stringVal = JSON.stringify(zoneList);\n                            } else {\n                                stringVal = \"'\" + arrayVal.join(\"','\") + \"'\";\n                            }\n                        }\n                    });\n\n                    if (stringVal) {\n                        fd.append(\"content\", stringVal);\n                    }\n\n\n                    //判断table的智能分组\n                    if (typeof plugin.options.func == \"function\") {\n                        var row = {\n                            'iClass': objData.iClass,\n                            'text': produceText\n                        };\n                        plugin.options.func(fd, row);\n                        closePop(filtering);\n                        return false;\n                    } else {\n                        XREWIN.loadingType = \"toast\";\n                        if (XREWIN.loading) {\n                            return false;\n                        }\n                        fd.append(\"parentId\", curNodeId || 'parentId');\n\n\n                        //添加节点数据\n                        var addNode = function (fd) {\n                            if (options.smartGroup) {\n                                options.smartGroup.addNode(fd, function () {\n                                    var data = this.split(',');\n                                    options.smartGroup.addBlock({\n                                        \"iClass\": objData.iClass,\n                                        \"id\": data[0],\n                                        \"text\": produceText,\n                                        \"count\": data[1] || -1\n                                    });\n                                });\n                            }\n                        };\n\n\n                        //判断input的值是否为空\n                        var inputCon = conType.find(\".validator\").val();\n                        var area = conType.find(\".select2-selection__rendered\").text();\n                        if (!inputCon) {\n                            conType.find(\".validator\").css({\"border\": \"1px solid red\", \"padding-left\": \"5px\"})\n                                .attr(\"placeholder\", TxtContent.dataIsNull);\n                            if (area) {\n                                //添加节点\n                                addNode(fd);\n                                closePop(filtering);\n                            } else {\n                                conType.find(\".select2-selection__rendered\").text(TxtContent.dataIsNull).css(\"padding\", \"5px\");\n                            }\n                        } else {\n                            //添加节点\n\n                            addNode(fd);\n                            closePop(filtering);\n                        }\n                        XREWIN.loadingType = \"\";\n                    }\n                });\n                return $pop;\n            });\n        };\n\n\n        //初始化\n        init(plugin.options.groupKey || '');\n\n        return plugin;\n    }\n})(jQuery, window, document);\n\n\n"]}